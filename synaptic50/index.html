<html lang="en">
   <!-- Google Tag Manager -->
   <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
      new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
      })(window,document,'script','dataLayer','GTM-5BMBQGD');
   </script>
   <!-- End Google Tag Manager -->
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="">
      <meta name="author" content="">
      <title>CJ Boyd</title>
      <!--<link rel="stylesheet" type="text/css" href="/global/custom.css">-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet">
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
      <script defer src="https://use.fontawesome.com/releases/v5.0.13/js/all.js" integrity="sha384-xymdQtn1n3lH2wcu0qhcdaOpQwyoarkgLVxC/wZ5q7h9gHtxICrpcaSUfygqZGOe" crossorigin="anonymous"></script>
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
      <script src = "https://caza.la/synaptic/scripts/homepage/synaptic.js"></script>
      <script src="/markov/mk.js"></script>
      <script src="multi_class_nn.js"></script>
      
      <!-- Bootstrap core CSS
         <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
         -->
      <!-- Custom styles for this template -->
      <link href="/global/simple-sidebar.css" rel="stylesheet">
   </head>
   <body>
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5BMBQGD"
         height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
      <div id="wrapper">
      <!-- Sidebar -->
      <div id="sidebar-wrapper">
         <!-- Loaded in with $().load-->
      </div>
      <!-- /#sidebar-wrapper -->
      <!-- Page Content -->
      <div id="buttonmenu">
         <a href="#menu-toggle" class="btn btn-default" id="menu-toggle">
            <h2>></h2>
         </a>
      </div>
      <main role="main" class="container">
         <div id="page-content-wrapper">
         <div class="jumbotron">
            <div class = "row">
               <div class="container-fluid">
                  <h1>Markov Chain Place Name Generator</h1>
                  <p>This Markov Chain model takes in real place names, and generates new place names based on the letter patterns within those place names.</p>
                  <p>Fiddle with the input options to generate crazy or realistic place names.</p>
                  <div class = "row justify-content-center">
                  <div class="col-6">
                  <button type=button id="btn" class = "btn btn-primary btn-lg btn-block">Generate New Place Names</button>
                  </div>
                  </div>  
                  <p>
                  </p>
                 <div class = "row justify-content-center">
                 <div class="col-8">
                  <div class="progress">
                     <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                     <span class="sr-only"></span>
                  </div>
                  </div>
                  </div>
                  </div>
                  <p>
                  </p>
                  <div class = "row">
                     <samp class="col" id = "op1"> </samp>
                     <samp class="col" id = "op2"> </samp>
                     <samp class="col" id = "op3"> </samp>
                     <samp class="col" id = "op4"> </samp>
                     <samp class="col" id = "op5"> </samp>
                     <samp class="col" id = "op6"> </samp>
                  </div>
               </div>
               </div>
               </div>
               Real data:
               <form name="inputcontainer">
               <div class="row">
                  <div class="col">
                     <textarea class= "input col form-control" id="a"> </textarea>
                  </div>
                  <div class="col">
                     <textarea class="input col form-control" id="b"> </textarea>
                  </div>
                  <div class="col">
                     <textarea class="input col form-control" id="c"> </textarea>
                  </div>
                  <div class="col">
                     <textarea class="input col form-control" id="d"> </textarea>
                  </div>
               </div>
                <small id="exp" class="form-text text-muted">
                   Pick one or more place name corpuses to enter them into the model.  Or select none for a surprise...
                </small>
              </form>
            Synthesised data (using <a href = "/markov/">Markov model</a>):
               <form name="inputcontainer">
               <div class="row">
                  <div class="col">
                     <textarea class= "input col form-control" id="a_s"> </textarea>
                  </div>
                  <div class="col">
                     <textarea class="input col form-control" id="b_s"> </textarea>
                  </div>
                  <div class="col">
                     <textarea class="input col form-control" id="c_s"> </textarea>
                  </div>
                  <div class="col">
                     <textarea class="input col form-control" id="d_s"> </textarea>
                  </div>
               </div>
                <small id="exp" class="form-text text-muted">
                   Pick one or more place name corpuses to enter them into the model.  Or select none for a surprise...
                </small>
              </form>

               <p>
               </p>
               <!--
                  Data from which country:
                  <form action="">
                    <input type="checkbox" name="lang" value="JP" id="lang_JP" checked="checked"> JP<br>
                    <input type="checkbox" name="lang" value="UK" id="lang_UK">UK<br>
                    <input type="checkbox" name="lang" value="CH" id="lang_CH">CH<br>
                    <input type="checkbox" name="lang" value="DE" id="lang_DE">DE<br>
                  </form>
                  -->
               <p>
               </p>
               Conservativeness:
               <form name="slidecontainer">
                  <input type="range" min="0" max="150" value="100" class="slider" id="power_slider" oninput="power_output_i.value = power_slider.value">
                  <output name="power_output_n" id="power_output_i">100</output>
                  <small id="exp" class="form-text text-muted">
                     How unlikely it is that the model will pick an uncommon pattern.  The higher the number, the more likely the most common patterns will be followed.
                  </small>
               </form>
               Lookback:
               <form name="slidecontainer">
                  <input type="range" min="1" max="3" value="3" class="slider" id="ngram_slider" oninput="ngram_output_i.value = ngram_slider.value">
                  <output name="ngram_output_n" id="ngram_output_i">3</output>
                   <small id="exp" class="form-text text-muted">
                     How many groups of consecutive letters the model looks at.  The higher the number, the more 'realistic' the place names will look.
                  </small>
               </form>
               % Of Samples:
               <form name="slidecontainer">
                  <input type="range" min="1" max="100" value="100" class="slider" id="sample_slider" oninput="sample_output_i.value = sample_slider.value">
                  <output name="sample_output_n" id="sample_output_i">100</output>
                   <small id="exp" class="form-text text-muted">
                      How many place name samples the model looks at, as a % of the total.  The more samples, the more realistic.
                   </small>
               </form>
               <!--    <a href="#menu-toggle" class="btn btn-secondary" id="menu-toggle">Show Menu</a>  -->
            
            <p>
            </p>
            <p>
               Inspired by <a href = "http://max.marrone.nyc/Markov-Word-Generator/">this</a> great project.  All the code is my own.  More information on Markov chains can be found at <a href = "https://en.wikipedia.org/wiki/Markov_chain">Wikipedia</a>.
            </p>
            </div>

            <!-- /#page-content-wrapper -->
      </main>
      </div>
      <!-- /#wrapper -->
      <script>
         function menu_toggle(e){
             $("#wrapper").toggleClass("toggled");
             if ($("#menu-toggle").text() === ">") {
                $("#menu-toggle").html("<h2><</h2>");
             } else {
                $("#menu-toggle").html("<h2>></h2>");
             }
         }
             
            
         $("#menu-toggle").click(function() {
            menu_toggle();
         });
             
         $(function(){
             $("#a").load("/data/jp.txt", function(){
               $("#b").load("/data/en.txt", function(){
                 $("#c").load("/data/ch.txt", function(){
                   $("#d").load("/data/de.txt", function(){
                      
                      let settings = {
                            n: 3,
                            power: 1.5,
                            samples: 50,
                            examples: 500,
                            as_array: false
                       };
                      
                      settings.text = $("#a").val();
                      $("#a_s").text( markov.get ( settings ));
                      settings.text = $("#b").val();
                      $("#b_s").text( markov.get ( settings ));
                      settings.text = $("#c").val();
                      $("#c_s").text( markov.get ( settings ));
                      settings.text = $("#d").val();
                      $("#d_s").text( markov.get ( settings ));

                      multi_name_class()
                    });
                 }); 
               });
             });
         });
                 
           $(function() {
             $("#sidebar-wrapper").load("/global/sidebar.html");
           });
                 
      </script>
   </body>
</html>
